<div class="container">
  <div class="appliances">
    <div class="section d-flex flex-column">
      <div class="title-row d-flex inter-medium flex-column">
        <div class="title">Appliances.</div>
        <div class="subtitle">Choose what you use.</div>
      </div>
      <div class="appliance-group" *ngFor="let group of applianceGroups">
        <div class="group-title inter-medium">{{ group }}</div>
        <hr />
        <div class="row">
          <div class="col-lg-5 col-xl-4" *ngFor="let appliance of getAppliancesByGroup(group)">
            <appliance-card
              [defaultAppliance]="appliance"
              (onEdit)="onApplianceValueChange($event, appliance)"
              (onSelect)="onApplianceSelect($event, appliance.id!)"
            ></appliance-card>
          </div>
        </div>
      </div>
      <div class="button-container">
        <button
          [ngClass]="{ 'fade-out': showStep2 }"
          class="btn btn-primary inter-regular"
          [disabled]="!isAnyApplianceSelected || showStep2"
          (click)="enableStep2()"
        >
          Continue
        </button>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <!-- scroll anchor here to create margin top -->
  <div id="step2" class="scroll-anchor"></div>
  <div class="step2-wrapper fade-in" *ngIf="showStep2">
    <div class="section zip" [ngClass]="{ disabled: !isAnyApplianceSelected }">
      <div class="title-row d-flex inter-medium flex-column">
        <div class="title">Location.</div>
        <div class="subtitle">Choose where you're off grid.</div>
        <div>
          <input
            type="text"
            pattern="[0-9]{5}"
            maxlength="5"
            [(ngModel)]="zipCode"
            placeholder="Enter ZIP Code*"
            (ngModelChange)="validateZip(false)"
            (blur)="validateZip(true)"
          />
          <i class="bi bi-question-circle info-icon" (click)="openModal()"></i>
        </div>
        <div *ngIf="zipErrorLength || zipErrorFormat" class="input-error-message inter-regular">
          Enter a valid 5 digit ZIP code
        </div>
        <!-- <button (click)="getSunHours(zipCode)">Get</button> -->
      </div>
    </div>
    <div class="section" [ngClass]="{ disabled: !isAnyApplianceSelected }">
      <div class="title-row d-flex inter-medium flex-column">
        <div class="title">Seasons.</div>
        <div class="subtitle">Choose when you're off grid.</div>
        <div class="row content-above-md">
          <mini-card
            (onSelect)="onSeasonSelect($event, 'spring')"
            label="Spring"
            iconName="bi-flower1"
          ></mini-card>

          <mini-card
            (onSelect)="onSeasonSelect($event, 'summer')"
            label="Summer"
            iconName="bi-sun"
          ></mini-card>
          <mini-card
            (onSelect)="onSeasonSelect($event, 'fall')"
            label="Fall"
            iconName="bi-tree"
          ></mini-card>

          <mini-card
            (onSelect)="onSeasonSelect($event, 'winter')"
            label="Winter"
            iconName="bi-snow"
          ></mini-card>
        </div>
        <div class="row content-below-md">
          <div class="row">
            <mini-card
              (onSelect)="onSeasonSelect($event, 'spring')"
              label="Spring"
              iconName="bi-flower1"
            ></mini-card>

            <mini-card
              (onSelect)="onSeasonSelect($event, 'summer')"
              label="Summer"
              iconName="bi-sun"
            ></mini-card>
          </div>
          <div class="row">
            <mini-card
              (onSelect)="onSeasonSelect($event, 'fall')"
              label="Fall"
              iconName="bi-tree"
            ></mini-card>

            <mini-card
              (onSelect)="onSeasonSelect($event, 'winter')"
              label="Winter"
              iconName="bi-snow"
            ></mini-card>
          </div>
        </div>
      </div>
    </div>
    <div class="button-container">
      <button
        class="btn btn-primary inter-regular"
        (click)="generateBuild()"
        [disabled]="!isAnyApplianceSelected"
      >
        Get results
      </button>
    </div>
  </div>
  <div *ngIf="showResults">
    <span>Peak wattage: {{ peakWattage }}</span>
    <span>Total watt hours: {{ totalWattHours }}</span>
    <span>Sun hours: {{ sunHours }}</span>
    <span>Total wattage needed: {{ wattageNeeded() }}</span>
  </div>

  <app-modal
    *ngIf="isModalOpen"
    [modalContent]="modalContent"
    modalHeader="Why we collect location data"
    (closeModal)="closeModal()"
  ></app-modal>
</div>
